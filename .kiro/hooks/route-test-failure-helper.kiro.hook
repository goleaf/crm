{
  "enabled": true,
  "name": "Route Test Failure Helper",
  "description": "Provides comprehensive guidance when route tests fail, helping developers quickly identify and fix issues",
  "version": "1",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Provide comprehensive troubleshooting guidance for route test failures. Include:\n\n## 1. Common Issues Analysis\n- Route Not Found (404 errors, undefined routes)\n- Authentication Required (401 errors, login redirects)\n- Missing Route Parameters (model binding issues)\n- Tenant Scoping Issues (403 errors, team mismatches)\n- API Token Issues (Sanctum authentication)\n- Middleware Conflicts (unexpected blocks)\n- Signed URL Routes (invalid signatures)\n- Missing Test Configuration (uncovered routes)\n\n## 2. Diagnostic Commands\nProvide commands to:\n- List all routes (`php artisan route:list`)\n- Clear caches (`php artisan optimize:clear`)\n- Run specific tests with verbose output\n- Filter and search routes\n\n## 3. Code Examples\nFor each issue type, provide:\n- Symptoms to look for\n- Working code examples with proper setup\n- Factory usage for test data\n- Proper authentication patterns\n- Model binding examples\n- Tenant scoping patterns\n\n## 4. RouteTestingConfig Updates\nShow how to:\n- Add routes to public/authenticated/API arrays\n- Configure parametric routes with bindings\n- Exclude complex routes from testing\n- Organize routes by category\n\n## 5. Quick Fixes\n- Authentication: `->actingAs($user)`\n- Model binding: `->bind('param', $model)`\n- API tokens: `->withToken($token)`\n- Tenant scoping: ensure models belong to user's team\n\n## 6. Documentation References\n- Link to `docs/pest-route-testing-complete-guide.md`\n- Link to `docs/pest-route-testing-integration.md`\n- Link to `.kiro/steering/pest-route-testing.md`\n- Link to package documentation\n\n## 7. Next Steps\n- Run diagnostics\n- Update configuration\n- Create missing tests\n- Verify fixes\n\nProvide this as a comprehensive, well-organized troubleshooting guide with code examples and clear explanations."
  },
  "workspaceFolderName": "crm",
  "shortName": "route-test-failure-helper"
}
